const i={OPEN:"open",HIDDEN:"hidden",DISPLAY_NONE:"display-none",GRID_CARD:"grid-card",CARD_TITLE:"card-title",COLLAPSE_CARET:"collapse-caret",CARD_COLLAPSE_CONTENT:"collapse-content",SCROLL_ARROW:"scroll-arrow",TRANSFORM_TO_SC_ITEM:"transform-to-sc-item",TRACK_WRAPPER:"track-wrapper",TRACK_TITLE:"track-title",TRACK_GENRE_DESC:"track-genre-description",TRACK_ADDL_DESC:"track-addl-description",PRIVACY_POLICY_COVER:"privacy-policy-cover",TREE:"tree",LEFT_ICON:"left-icon",RIGHT_SIDE:"right-side",FOLDER_TREE:"folder-tree",TOOLTIP:"tooltip",TOOLTIP_TEXT:"tooltiptext"},u=800;function C(t,n=0){return t.scrollTop<n}function d(t,n=0){return t.scrollTop>t.scrollHeight-t.offsetHeight-n}function A(t){return t.scrollHeight>t.clientHeight}function L(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function E(){return L()<u}function f(t,{attributes:n,classes:r,onClick:e}={}){const s=document.createElement(t);return n&&Object.entries(n).forEach(([o,c])=>s.setAttribute(o,c)),r&&s.classList.add(...r),e&&s.addEventListener("click",e),s}function T(t,n){return new Promise(r=>{const e=t();if(e.length===n)return r(e);const s=new MutationObserver(()=>{const o=t();o.length===n&&(r(o),s.disconnect())});s.observe(document.body,{childList:!0,subtree:!0})})}function m(t){(t.key==="Enter"||t.key===" ")&&t.target?.dispatchEvent(new MouseEvent("click",{...t,view:void 0}))}function _(t,n){new MutationObserver(r=>{r.forEach(e=>{e.type==="attributes"&&e.attributeName==="class"&&n()})}).observe(t,{attributes:!0})}function O(){function t(e){return e.classList.contains(i.HIDDEN)}function n(e,s){const o=e.parentElement,c=o.getElementsByClassName(i.CARD_COLLAPSE_CONTENT)[0],l=o.getElementsByClassName(i.COLLAPSE_CARET)[0];c.classList.toggle(i.HIDDEN,s),l.classList.toggle(i.OPEN,!s)}const r=Array.from(document.getElementsByClassName(i.CARD_TITLE));r.forEach(e=>{n(e,E()),e.setAttribute("role","button"),e.setAttribute("tabIndex",String(0)),e.addEventListener("keypress",m),e.addEventListener("click",async()=>{const s=e.parentElement,o=s.getElementsByClassName(i.CARD_COLLAPSE_CONTENT)[0],c=t(o);n(e,!c),c&&(p(o)&&await T(()=>o.getElementsByClassName(i.SCROLL_ARROW),2),s.scrollIntoView({behavior:"smooth",block:"center"}),E()&&r.forEach(a=>{a!==e&&n(a,!0)}))})}),window.addEventListener("resize",()=>{r.forEach(e=>{n(e,E())})},!0)}function p(t){if(!A(t)||t.getElementsByClassName(i.SCROLL_ARROW).length>0)return!1;const n=150,r=100,e=[i.SCROLL_ARROW,"fa","fa-2x"],s=f("div",{classes:[...e,"fa-caret-up"],onClick:()=>{const a=t.scrollTop-n;t.scrollTo({top:C({scrollTop:a},r)?0:a,behavior:"smooth"})}}),o=f("div",{classes:[...e,"fa-caret-down"],onClick:()=>{const a=t.scrollTop+n;t.scrollTo({top:d({scrollHeight:t.scrollHeight,offsetHeight:t.offsetHeight,scrollTop:a},r)?t.scrollHeight:a,behavior:"smooth"})}});t.parentElement.insertBefore(s,t),t.parentElement.appendChild(o);const c=5;s.style.top=t.offsetTop+c+"px",o.style.top=t.offsetTop+t.getBoundingClientRect().height-o.getBoundingClientRect().height-c+"px";function l(){s.classList.toggle(i.DISPLAY_NONE,C(t,50)),o.classList.toggle(i.DISPLAY_NONE,d(t,50))}return l(),t.addEventListener("scroll",l),_(t,l),!0}function h(){const t=()=>document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`);window.addEventListener("resize",t),t(),O(),Array.from(document.getElementsByClassName(i.CARD_COLLAPSE_CONTENT)).forEach(n=>p(n))}h();
