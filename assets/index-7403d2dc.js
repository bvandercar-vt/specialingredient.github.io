const n={OPEN:"open",HIDDEN:"hidden",DISPLAY_NONE:"display-none",GRID_CARD:"grid-card",CARD_TITLE:"card-title",COLLAPSE_CARET:"collapse-caret",CARD_COLLAPSE_CONTENT:"collapse-content",SCROLL_ARROW:"scroll-arrow",SCROLL_ARROW_UP:"scroll-arrow-up",SCROLL_ARROW_DOWN:"scroll-arrow-down",TRANSFORM_TO_SC_ITEM:"transform-to-sc-item",TRACK_WRAPPER:"track-wrapper",TRACK_TITLE:"track-title",TRACK_GENRE_DESC:"track-genre-description",TRACK_ADDL_DESC:"track-addl-description",PRIVACY_POLICY_COVER:"privacy-policy-cover",TREE:"tree",LEFT_ICON:"left-icon",RIGHT_SIDE:"right-side",FOLDER_TREE:"folder-tree",TOOLTIP:"tooltip",TOOLTIP_TEXT:"tooltiptext"},f=800;function C(t,s=0){return t.scrollTop<s}function d(t,s=0){return t.scrollTop>t.scrollHeight-t.offsetHeight-s}function u(t){return t.scrollHeight>t.clientHeight}function O(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function a(){return O()<f}function L(t,{attributes:s,classes:r,onClick:e}={}){const o=document.createElement(t);return s&&Object.entries(s).forEach(([i,c])=>o.setAttribute(i,c)),r&&o.classList.add(...r),e&&o.addEventListener("click",e),o}function _(t,s){return new Promise(r=>{const e=t();if(e.length===s)return r(e);const o=new MutationObserver(()=>{const i=t();i.length===s&&(r(i),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})})}function p(t){(t.key==="Enter"||t.key===" ")&&t.target?.dispatchEvent(new MouseEvent("click",{...t,view:void 0}))}function m(t,s){new MutationObserver(r=>{r.forEach(e=>{e.type==="attributes"&&e.attributeName==="class"&&s()})}).observe(t,{attributes:!0})}function T(){function t(e){return e.classList.contains(n.HIDDEN)}function s(e,o){const i=e.parentElement,c=i.getElementsByClassName(n.CARD_COLLAPSE_CONTENT)[0],l=i.getElementsByClassName(n.COLLAPSE_CARET)[0];c.classList.toggle(n.HIDDEN,o),l.classList.toggle(n.OPEN,!o)}const r=Array.from(document.getElementsByClassName(n.CARD_TITLE));r.forEach(e=>{s(e,a()),e.setAttribute("role","button"),e.setAttribute("tabIndex",String(0)),e.addEventListener("keypress",p),e.addEventListener("click",async()=>{const o=e.parentElement,i=o.getElementsByClassName(n.CARD_COLLAPSE_CONTENT)[0],c=t(i);s(e,!c),c&&(A(i)&&await _(()=>i.getElementsByClassName(n.SCROLL_ARROW),2),o.scrollIntoView({behavior:"smooth",block:"center"}),a()&&r.forEach(E=>{E!==e&&s(E,!0)}))})}),window.addEventListener("resize",()=>{r.forEach(e=>{s(e,a())})},!0)}function A(t){if(!u(t)||t.getElementsByClassName(n.SCROLL_ARROW).length>0)return!1;const s=150,r=100,e=[n.SCROLL_ARROW,"fa","fa-2x"],o=L("div",{classes:[...e,n.SCROLL_ARROW_UP,"fa-caret-up"],onClick:()=>{const l=t.scrollTop-s;t.scrollTo({top:C({scrollTop:l},r)?0:l,behavior:"smooth"})}}),i=L("div",{classes:[...e,n.SCROLL_ARROW_DOWN,"fa-caret-down"],onClick:()=>{const l=t.scrollTop+s;t.scrollTo({top:d({scrollHeight:t.scrollHeight,offsetHeight:t.offsetHeight,scrollTop:l},r)?t.scrollHeight:l,behavior:"smooth"})}});t.insertBefore(o,t.firstChild),t.appendChild(i);function c(){o.classList.toggle(n.DISPLAY_NONE,C(t,50)),i.classList.toggle(n.DISPLAY_NONE,d(t,50))}return c(),t.addEventListener("scroll",c),m(t,c),!0}function w(){const t=()=>document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`);window.addEventListener("resize",t),t(),T(),Array.from(document.getElementsByClassName(n.CARD_COLLAPSE_CONTENT)).forEach(s=>A(s))}w();
