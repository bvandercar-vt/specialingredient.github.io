function p(e,t,r={},a={}){const o=new URL(t);for(const[s,c]of Object.entries(r))c!==void 0&&o.searchParams.set(s,String(c));return fetch(o.href,{...a,method:e}).then(async s=>{if(s.status<200||s.status>300)throw new Error(`${s.status}: ${s.statusText} - ${await s.text()}`);return s})}const L="DgFeY88vapbGCcK7RrT2E33nmNQVWX82";function _(e){return p("GET","https://soundcloud.com/oembed",{client_id:L,...e}).then(t=>t.json())}const h=800;function f(e,t=0){return e.scrollTop<t}function A(e,t=0){return e.scrollTop>e.scrollHeight-e.offsetHeight-t}function S(e){return e.scrollHeight>e.clientHeight}function R(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function C(){return R()<h}function T(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}function g(e,t){return new Promise(r=>{const a=e();if(a.length===t)return r(a);const o=new MutationObserver(()=>{const s=e();s.length===t&&(r(s),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})})}function O(e){(e.key==="Enter"||e.key===" ")&&e.target?.dispatchEvent(new MouseEvent("click",{...e,view:void 0}))}const n={OPEN:"open",HIDDEN:"hidden",COLLAPSE_CARET:"collapse-caret",PLAYLIST_TITLE:"playlist-title",FIXED_TOP:"fixed-top",PLAYLIST_ITEMS:"playlist-items",TRANSFORM_TO_SC_ITEM:"transform-to-sc-item",TRACK_WRAPPER:"track-wrapper",TRACK_TITLE:"track-title",TRACK_GENRE_DESC:"track-genre-description",TRACK_ADDL_DESC:"track-addl-description",PRIVACY_POLICY_COVER:"privacy-policy-cover",SCROLL_ARROW:"scroll-arrow",SCROLL_ARROW_UP:"scroll-arrow-up",SCROLL_ARROW_DOWN:"scroll-arrow-down"};function E(e,t){const r=e.parentElement,a=r.getElementsByClassName(n.PLAYLIST_ITEMS)[0],o=r.getElementsByClassName(n.COLLAPSE_CARET)[0];a.classList.toggle(n.HIDDEN,t),o.classList.toggle(n.OPEN,!t),e.classList.toggle(n.FIXED_TOP,!t)}function w(){const e=document.getElementsByClassName(n.PLAYLIST_TITLE);Array.from(e).forEach(t=>{t.setAttribute("tabIndex",String(0)),t.addEventListener("keypress",O);const r=document.createElement("span");r.classList.add("fa","fa-lg","fa-caret-down",n.COLLAPSE_CARET),t.appendChild(r),E(t,C()),t.addEventListener("click",()=>{const a=t.parentElement,s=a.getElementsByClassName(n.PLAYLIST_ITEMS)[0].classList.contains(n.HIDDEN);E(t,!s),s&&(a.scrollIntoView({behavior:"smooth",block:"end"}),C()&&Array.from(e).forEach(c=>{c!==t&&E(c,!0)}))})})}async function P(){const e=document.getElementsByClassName(n.TRANSFORM_TO_SC_ITEM);Array.from(e).forEach(t=>_({url:t.getAttribute("data-sc-link"),maxheight:150,auto_play:!1}).then(r=>{const a=t.getAttribute("data-title")??r.title.replaceAll(" by Special Ingredient","").replaceAll("[w TRACKLIST]","").replaceAll("[MASHUP]",""),o=t.getAttribute("data-genre-desc"),s=t.getAttribute("data-addl-desc"),c=s==="GET_FROM_SC"?r.description:s,l=document.createElement("div");if(l.classList.add(n.TRACK_WRAPPER),a){const d=document.createElement("p");d.classList.add(n.TRACK_TITLE),d.appendChild(document.createTextNode(a)),l.appendChild(d)}if(o){const d=document.createElement("p");d.classList.add(n.TRACK_GENRE_DESC),d.appendChild(document.createTextNode(o)),l.appendChild(d)}if(c){const d=document.createElement("p");d.classList.add(n.TRACK_ADDL_DESC),d.appendChild(document.createTextNode(c)),l.appendChild(d)}const m=T(r.html);m.title=a;const i=new URL(m.src);i.searchParams.set("auto_play",String(!1)),i.searchParams.set("hide_related",String(!1)),i.searchParams.set("show_comments",String(!0)),i.searchParams.set("show_user",String(!1)),i.searchParams.set("show_reposts",String(!0)),i.searchParams.set("show_teaser",String(!1)),i.searchParams.set("visual",String(!0)),i.searchParams.set("show_artwork",String(!0)),m.src=i.href,l.appendChild(m);const u=document.createElement("div");u.classList.add(n.PRIVACY_POLICY_COVER),l.appendChild(u),t.replaceWith(l)})),await g(()=>document.getElementsByClassName(n.TRACK_WRAPPER),e.length)}function I(){const e=document.getElementsByClassName(n.PLAYLIST_ITEMS);Array.from(e).forEach(t=>{if(!S(t))return;const r=150,a=[n.SCROLL_ARROW,"fa","fa-2x"],o=document.createElement("div");o.classList.add(...a,n.SCROLL_ARROW_UP,"fa-caret-up"),o.addEventListener("click",()=>{const c=t.scrollTop-r;t.scrollTo({top:c<40?0:c,behavior:"smooth"})});const s=document.createElement("div");s.classList.add(...a,n.SCROLL_ARROW_DOWN,"fa-caret-down"),s.addEventListener("click",()=>{const c=t.scrollTop+r;t.scrollTo({top:c,behavior:"smooth"})}),t.insertBefore(o,t.firstChild),t.appendChild(s),t.addEventListener("scroll",c=>{const l=c.target,m=l.getElementsByClassName(n.SCROLL_ARROW_UP)[0],i=l.getElementsByClassName(n.SCROLL_ARROW_DOWN)[0];m.style.display=f(l,50)?"none":"inherit",i.style.display=A(l,50)?"none":"inherit"})})}async function y(){Array.from(document.getElementsByTagName("a")).forEach(e=>{e.target="_blank",e.rel="noreferrer noopener"}),w(),await P(),I()}y();
