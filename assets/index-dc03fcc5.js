const o={OPEN:"open",HIDDEN:"hidden",GRID_CARD:"grid-card",CARD_TITLE:"card-title",COLLAPSE_CARET:"collapse-caret",CARD_COLLAPSE_CONTENT:"collapse-content",SCROLLABLE_REGION:"scrollable-region",SCROLL_ARROW:"scroll-arrow",SCROLL_ARROW_UP:"scroll-arrow-up",SCROLL_ARROW_DOWN:"scroll-arrow-down",TRANSFORM_TO_SC_ITEM:"transform-to-sc-item",TRACK_WRAPPER:"track-wrapper",TRACK_TITLE:"track-title",TRACK_GENRE_DESC:"track-genre-description",TRACK_ADDL_DESC:"track-addl-description",PRIVACY_POLICY_COVER:"privacy-policy-cover",TREE:"tree",LEFT_ICON:"left-icon",RIGHT_SIDE:"right-side",FOLDER_TREE:"folder-tree",TOOLTIP:"tooltip",TOOLTIP_TEXT:"tooltiptext"},O=800;function L(e,t=0){return e.scrollTop<t}function f(e,t=0){return e.scrollTop>e.scrollHeight-e.offsetHeight-t}function _(e){return e.scrollHeight>e.clientHeight}function u(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function d(){return u()<O}function C(e,{attributes:t,classes:r,onClick:n}={}){const s=document.createElement(e);return t&&Object.entries(t).forEach(([c,i])=>s.setAttribute(c,i)),r&&s.classList.add(...r),n&&s.addEventListener("click",n),s}function m(e,t){return new Promise(r=>{const n=e();if(n.length===t)return r(n);const s=new MutationObserver(()=>{const c=e();c.length===t&&(r(c),s.disconnect())});s.observe(document.body,{childList:!0,subtree:!0})})}function p(e){(e.key==="Enter"||e.key===" ")&&e.target?.dispatchEvent(new MouseEvent("click",{...e,view:void 0}))}function R(e){return e.classList.contains(o.HIDDEN)}function a(e,t){e.classList.toggle(o.HIDDEN,t)}function E(e,t){const r=e.parentElement,n=r.getElementsByClassName(o.CARD_COLLAPSE_CONTENT)[0],s=r.getElementsByClassName(o.COLLAPSE_CARET)[0];a(n,t),s.classList.toggle(o.OPEN,!t)}function T(){const e=Array.from(document.getElementsByClassName(o.CARD_TITLE));e.forEach(t=>{E(t,d()),t.setAttribute("role","button"),t.setAttribute("tabIndex",String(0)),t.addEventListener("keypress",p),t.addEventListener("click",async()=>{const r=t.parentElement,n=r.getElementsByClassName(o.CARD_COLLAPSE_CONTENT)[0],s=R(n);if(E(t,!s),s){if(A(n))await m(()=>n.getElementsByClassName(o.SCROLL_ARROW),2);else{const i=n.getElementsByClassName(o.SCROLL_ARROW);i.length>0&&(a(i[0],!0),a(i[1],!1))}r.scrollIntoView({behavior:"smooth",block:"center"}),d()&&e.forEach(i=>{i!==t&&E(i,!0)})}})}),window.addEventListener("resize",()=>{e.forEach(t=>{E(t,d())})},!0)}function A(e){if(!_(e)||e.getElementsByClassName(o.SCROLLABLE_REGION).length>0)return!1;const t=C("div",{classes:[o.SCROLLABLE_REGION]});Array.from(e.childNodes).forEach(l=>t.appendChild(l)),e.replaceChildren(t);const r=150,n=100,s=[o.SCROLL_ARROW,"fa","fa-2x"],c=C("div",{classes:[...s,o.SCROLL_ARROW_UP,"fa-caret-up"],onClick:()=>{const l=e.scrollTop-r;e.scrollTo({top:L({scrollTop:l},n)?0:l,behavior:"smooth"})}}),i=C("div",{classes:[...s,o.SCROLL_ARROW_DOWN,"fa-caret-down"],onClick:()=>{const l=e.scrollTop+r;e.scrollTo({top:f({scrollHeight:e.scrollHeight,offsetHeight:e.offsetHeight,scrollTop:l},n)?e.scrollHeight:l,behavior:"smooth"})}});return a(c,!0),a(i,!1),e.insertBefore(c,e.firstChild),e.appendChild(i),e.addEventListener("scroll",()=>{a(c,L(e,50)),a(i,f(e,50))}),!0}function h(){const e=()=>document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`);window.addEventListener("resize",e),e(),T(),Array.from(document.getElementsByClassName(o.CARD_COLLAPSE_CONTENT)).forEach(t=>A(t))}h();
