function L(t){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}const _=800,s={OPEN:"open",HIDDEN:"hidden",COLLAPSE_CARET:"collapse-caret",PLAYLIST_TITLE:"playlist-title",PLAYLIST_ITEMS:"playlist-items",TRANSFORM_TO_SC_ITEM:"transform-to-sc-item",TRACK_WRAPPER:"track-wrapper",TRACK_TITLE:"track-title",TRACK_GENRE_DESC:"track-genre-description",TRACK_ADDL_DESC:"track-addl-description",PRIVACY_POLICY_COVER:"privacy-policy-cover",SCROLL_ARROW:"scroll-arrow",SCROLL_ARROW_UP:"scroll-arrow-up",SCROLL_ARROW_DOWN:"scroll-arrow-down"};function f(t,e=0){return t.scrollTop<e}function h(t,e=0){return t.scrollTop>t.scrollHeight-t.offsetHeight-e}function A(t){return t.scrollHeight>t.clientHeight}function T(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function C(){return T()<_}function R(t,e){return new Promise(n=>{const a=t();if(a.length===e)return n(a);const o=new MutationObserver(c=>{const r=t();r.length===e&&(n(r),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})})}function S(){function t(n,a){const o=a.parentElement.getElementsByClassName(s.PLAYLIST_ITEMS)[0],c=a.parentElement.getElementsByClassName(s.COLLAPSE_CARET)[0];n?(o.classList.add(s.HIDDEN),c.classList.remove(s.OPEN)):(o.classList.remove(s.HIDDEN),c.classList.add(s.OPEN))}const e=document.getElementsByClassName(s.PLAYLIST_TITLE);Array.from(e).forEach(n=>{const a=document.createElement("span");a.classList=`fa fa-lg fa-caret-down ${s.COLLAPSE_CARET}`,n.appendChild(a),t(C(),n),n.addEventListener("click",function(){const c=this.parentElement.getElementsByClassName(s.PLAYLIST_ITEMS)[0].classList.contains(s.HIDDEN);t(!c,this),C()&&c&&Array.from(e).forEach(r=>{r!==this&&t(!0,r)})})})}async function O(t){const e=document.getElementsByClassName(s.TRANSFORM_TO_SC_ITEM);Array.from(e).forEach(n=>{t.oEmbed(n.getAttribute("data-sc-link"),{auto_play:!1,maxheight:150}).then(a=>{const o=n.getAttribute("data-title")??a.title.replaceAll(" by Special Ingredient","").replaceAll("[w TRACKLIST]","").replaceAll("[MASHUP]",""),c=n.getAttribute("data-genre-desc"),r=n.getAttribute("data-addl-desc"),l=document.createElement("div");l.classList=s.TRACK_WRAPPER;const m=document.createElement("p");if(m.classList=s.TRACK_TITLE,m.appendChild(document.createTextNode(o)),l.appendChild(m),c){const d=document.createElement("p");d.classList=s.TRACK_GENRE_DESC,d.appendChild(document.createTextNode(c)),l.appendChild(d)}if(r){const d=document.createElement("p");d.classList=s.TRACK_ADDL_DESC;const u=r==="GET_FROM_SC"?a.description:r;d.appendChild(document.createTextNode(u)),l.appendChild(d)}const p=L(a.html);p.title=o;const i=new URL(p.src);i.searchParams.set("auto_play",!1),i.searchParams.set("hide_related",!1),i.searchParams.set("show_comments",!0),i.searchParams.set("show_user",!1),i.searchParams.set("show_reposts",!0),i.searchParams.set("show_teaser",!1),i.searchParams.set("visual",!0),i.searchParams.set("show_artwork",!0),p.src=i.href,l.appendChild(p);const E=document.createElement("div");E.classList=s.PRIVACY_POLICY_COVER,l.appendChild(E),n.replaceWith(l)})}),await R(()=>document.getElementsByClassName(s.TRACK_WRAPPER),e.length)}function P(){const t=document.getElementsByClassName(s.PLAYLIST_ITEMS);Array.from(t).forEach(e=>{if(!A(e))return;const n=150,a=document.createElement("div");a.classList=`${s.SCROLL_ARROW} ${s.SCROLL_ARROW_UP} fa fa-caret-up fa-2x`,a.addEventListener("click",function(){e.scrollTo({top:e.scrollTop-n,behavior:"smooth"})});const o=document.createElement("div");o.classList=`${s.SCROLL_ARROW} ${s.SCROLL_ARROW_DOWN} fa fa-caret-down fa-2x`,o.addEventListener("click",function(){e.scrollTo({top:e.scrollTop+n,behavior:"smooth"})}),e.insertBefore(a,e.firstChild),e.appendChild(o),e.addEventListener("scroll",function(c){const r=c.target,l=r.getElementsByClassName(s.SCROLL_ARROW_UP)[0],m=r.getElementsByClassName(s.SCROLL_ARROW_DOWN)[0];l.style.display=f(r,50)?"none":"inherit",m.style.display=h(r,50)?"none":"inherit"})})}async function y(){Array.from(document.getElementsByTagName("a")).forEach(t=>{t.target="_blank",t.rel="noreferrer noopener"}),S(),SC.initialize({client_id:"DgFeY88vapbGCcK7RrT2E33nmNQVWX82"}),await O(SC),P()}y();
