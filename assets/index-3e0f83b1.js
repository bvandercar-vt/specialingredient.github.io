function _(t,e=0){return t.scrollTop<e}function T(t,e=0){return t.scrollTop>t.scrollHeight-t.offsetHeight-e}function h(t){return t.scrollHeight>t.clientHeight}function A(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function L(){return A()<800}function S(t){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}function f(t,e){return new Promise(n=>{const o=t();if(o.length===e)return n(o);const c=new MutationObserver(()=>{const a=t();a.length===e&&(n(a),c.disconnect())});c.observe(document.body,{childList:!0,subtree:!0})})}const{SC:u}=window,s={OPEN:"open",HIDDEN:"hidden",COLLAPSE_CARET:"collapse-caret",PLAYLIST_TITLE:"playlist-title",PLAYLIST_ITEMS:"playlist-items",TRANSFORM_TO_SC_ITEM:"transform-to-sc-item",TRACK_WRAPPER:"track-wrapper",TRACK_TITLE:"track-title",TRACK_GENRE_DESC:"track-genre-description",TRACK_ADDL_DESC:"track-addl-description",PRIVACY_POLICY_COVER:"privacy-policy-cover",SCROLL_ARROW:"scroll-arrow",SCROLL_ARROW_UP:"scroll-arrow-up",SCROLL_ARROW_DOWN:"scroll-arrow-down"};function R(){function t(n,o){const c=o.parentElement,a=c.getElementsByClassName(s.PLAYLIST_ITEMS)[0],r=c.getElementsByClassName(s.COLLAPSE_CARET)[0];n?(a.classList.add(s.HIDDEN),r.classList.remove(s.OPEN)):(a.classList.remove(s.HIDDEN),r.classList.add(s.OPEN))}const e=document.getElementsByClassName(s.PLAYLIST_TITLE);Array.from(e).forEach(n=>{const o=document.createElement("span");o.classList.add("fa","fa-lg","fa-caret-down",s.COLLAPSE_CARET),n.appendChild(o),t(L(),n),n.addEventListener("click",function(){const a=this.parentElement.getElementsByClassName(s.PLAYLIST_ITEMS)[0].classList.contains(s.HIDDEN);t(!a,this),L()&&a&&Array.from(e).forEach(r=>{r!==this&&t(!0,r)})})})}async function O(t){const e=document.getElementsByClassName(s.TRANSFORM_TO_SC_ITEM);Array.from(e).forEach(n=>{t.oEmbed(n.getAttribute("data-sc-link"),{auto_play:!1,maxheight:150}).then(o=>{const c=n.getAttribute("data-title")??o.title.replaceAll(" by Special Ingredient","").replaceAll("[w TRACKLIST]","").replaceAll("[MASHUP]",""),a=n.getAttribute("data-genre-desc"),r=n.getAttribute("data-addl-desc"),d=r==="GET_FROM_SC"?o.description:r,l=document.createElement("div");l.classList.add(s.TRACK_WRAPPER);const p=document.createElement("p");if(p.classList.add(s.TRACK_TITLE),p.appendChild(document.createTextNode(c)),l.appendChild(p),a){const m=document.createElement("p");m.classList.add(s.TRACK_GENRE_DESC),m.appendChild(document.createTextNode(a)),l.appendChild(m)}if(d){const m=document.createElement("p");m.classList.add(s.TRACK_ADDL_DESC),m.appendChild(document.createTextNode(d)),l.appendChild(m)}const E=S(o.html);E.title=c;const i=new URL(E.src);i.searchParams.set("auto_play",String(!1)),i.searchParams.set("hide_related",String(!1)),i.searchParams.set("show_comments",String(!0)),i.searchParams.set("show_user",String(!1)),i.searchParams.set("show_reposts",String(!0)),i.searchParams.set("show_teaser",String(!1)),i.searchParams.set("visual",String(!0)),i.searchParams.set("show_artwork",String(!0)),E.src=i.href,l.appendChild(E);const C=document.createElement("div");C.classList.add(s.PRIVACY_POLICY_COVER),l.appendChild(C),n.replaceWith(l)})}),await f(()=>document.getElementsByClassName(s.TRACK_WRAPPER),e.length)}function P(){const t=document.getElementsByClassName(s.PLAYLIST_ITEMS);Array.from(t).forEach(e=>{if(!h(e))return;const n=150,o=[s.SCROLL_ARROW,"fa","fa-2x"],c=document.createElement("div");c.classList.add(...o,s.SCROLL_ARROW_UP,"fa-caret-up"),c.addEventListener("click",()=>{const r=e.scrollTop-n;e.scrollTo({top:r<40?0:r,behavior:"smooth"})});const a=document.createElement("div");a.classList.add(...o,s.SCROLL_ARROW_DOWN,"fa-caret-down"),a.addEventListener("click",()=>{const r=e.scrollTop+n;e.scrollTo({top:r,behavior:"smooth"})}),e.insertBefore(c,e.firstChild),e.appendChild(a),e.addEventListener("scroll",r=>{const d=r.target,l=d.getElementsByClassName(s.SCROLL_ARROW_UP)[0],p=d.getElementsByClassName(s.SCROLL_ARROW_DOWN)[0];l.style.display=_(d,50)?"none":"inherit",p.style.display=T(d,50)?"none":"inherit"})})}async function g(){Array.from(document.getElementsByTagName("a")).forEach(t=>{t.target="_blank",t.rel="noreferrer noopener"}),R(),u.initialize({client_id:"DgFeY88vapbGCcK7RrT2E33nmNQVWX82"}),await O(u),P()}g();
