const r={OPEN:"open",HIDDEN:"hidden",DISPLAY_NONE:"display-none",GRID_CARD:"grid-card",CARD_TITLE:"card-title",COLLAPSE_CARET:"collapse-caret",CARD_COLLAPSE_CONTENT:"collapse-content",SCROLLABLE_REGION:"scrollable-region",SCROLL_ARROW:"scroll-arrow",SCROLL_ARROW_UP:"scroll-arrow-up",SCROLL_ARROW_DOWN:"scroll-arrow-down",TRANSFORM_TO_SC_ITEM:"transform-to-sc-item",TRACK_WRAPPER:"track-wrapper",TRACK_TITLE:"track-title",TRACK_GENRE_DESC:"track-genre-description",TRACK_ADDL_DESC:"track-addl-description",PRIVACY_POLICY_COVER:"privacy-policy-cover",TREE:"tree",LEFT_ICON:"left-icon",RIGHT_SIDE:"right-side",FOLDER_TREE:"folder-tree",TOOLTIP:"tooltip",TOOLTIP_TEXT:"tooltiptext"},O=800;function L(e,s=0){return e.scrollTop<s}function A(e,s=0){return e.scrollTop>e.scrollHeight-e.offsetHeight-s}function _(e){return e.scrollHeight>e.clientHeight}function u(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function C(){return u()<O}function d(e,{attributes:s,classes:i,onClick:t}={}){const o=document.createElement(e);return s&&Object.entries(s).forEach(([n,c])=>o.setAttribute(n,c)),i&&o.classList.add(...i),t&&o.addEventListener("click",t),o}function p(e,s){return new Promise(i=>{const t=e();if(t.length===s)return i(t);const o=new MutationObserver(()=>{const n=e();n.length===s&&(i(n),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})})}function m(e){(e.key==="Enter"||e.key===" ")&&e.target?.dispatchEvent(new MouseEvent("click",{...e,view:void 0}))}function R(){function e(t){return t.classList.contains(r.HIDDEN)}function s(t,o){const n=t.parentElement,c=n.getElementsByClassName(r.CARD_COLLAPSE_CONTENT)[0],l=n.getElementsByClassName(r.COLLAPSE_CARET)[0];c.classList.toggle(r.HIDDEN,o),l.classList.toggle(r.OPEN,!o)}const i=Array.from(document.getElementsByClassName(r.CARD_TITLE));i.forEach(t=>{s(t,C()),t.setAttribute("role","button"),t.setAttribute("tabIndex",String(0)),t.addEventListener("keypress",m),t.addEventListener("click",async()=>{const o=t.parentElement,n=o.getElementsByClassName(r.CARD_COLLAPSE_CONTENT)[0],c=e(n);if(s(t,!c),c){if(f(n))await p(()=>n.getElementsByClassName(r.SCROLL_ARROW),2);else{const a=n.getElementsByClassName(r.SCROLL_ARROW);a.length>0&&(E(a[0],!0),E(a[1],!1))}o.scrollIntoView({behavior:"smooth",block:"center"}),C()&&i.forEach(a=>{a!==t&&s(a,!0)})}})}),window.addEventListener("resize",()=>{i.forEach(t=>{s(t,C())})},!0)}function E(e,s){e.classList.toggle(r.DISPLAY_NONE,s)}function f(e){if(!_(e)||e.getElementsByClassName(r.SCROLLABLE_REGION).length>0)return!1;const s=d("div",{classes:[r.SCROLLABLE_REGION]});Array.from(e.childNodes).forEach(l=>s.appendChild(l)),e.replaceChildren(s);const i=150,t=100,o=[r.SCROLL_ARROW,"fa","fa-2x"],n=d("div",{classes:[...o,r.SCROLL_ARROW_UP,"fa-caret-up"],onClick:()=>{const l=e.scrollTop-i;e.scrollTo({top:L({scrollTop:l},t)?0:l,behavior:"smooth"})}}),c=d("div",{classes:[...o,r.SCROLL_ARROW_DOWN,"fa-caret-down"],onClick:()=>{const l=e.scrollTop+i;e.scrollTo({top:A({scrollHeight:e.scrollHeight,offsetHeight:e.offsetHeight,scrollTop:l},t)?e.scrollHeight:l,behavior:"smooth"})}});return E(n,!0),E(c,!1),e.insertBefore(n,e.firstChild),e.appendChild(c),e.addEventListener("scroll",()=>{E(n,L(e,50)),E(c,A(e,50))}),!0}function T(){const e=()=>document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`);window.addEventListener("resize",e),e(),R(),Array.from(document.getElementsByClassName(r.CARD_COLLAPSE_CONTENT)).forEach(s=>f(s))}T();
